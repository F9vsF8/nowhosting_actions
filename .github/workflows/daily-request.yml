name: Daily Request

on:
  schedule:
    - cron: '30 0 * * *'  # 每天00:30运行
  workflow_dispatch:  # 允许手动触发
    inputs:
      # 不需要手动输入参数值，直接引用Repository Secrets中的值
      mb_id: ${{ secrets.MB_ID }}
      mb_password: ${{ secrets.MB_PASSWORD }}

jobs:
  send_request:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Send POST Request
        env:
          # 不需要手动设置环境变量，直接使用 ${{ secrets.MB_ID }} 和 ${{ secrets.MB_PASSWORD }} 引用Repository Secrets中的值
          MB_ID: ${{ secrets.MB_ID }}
          MB_PASSWORD: ${{ secrets.MB_PASSWORD }}
        run: |
          curl -X POST \
            -H "Content-Type: application/x-www-form-urlencoded" \
            -H "Origin: https://nowhosting.kr" \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9" \
            -H "Referer: https://nowhosting.kr/bbs/login.php" \
            -d "mb_id=${MB_ID}&mb_password=${MB_PASSWORD}" \
            https://nowhosting.kr/bbs/login_check.php
